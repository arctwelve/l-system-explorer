<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test</title>




    <script>

       /*
        * prototype for SPA loading one asset page, with multiple assets. asset page only needs
        * containers and styles and should preview alone in the browser w/o server (key benefit).
        *
        * once assets are loaded the styles are moved to the head of parent page (the page that
        * loaded the assets). assets themselves are cloned (need to clarify where/how/when/if).
        * and temporary loading iframe and asset page are removed from memory (assumption on the
        * asset page re memory, but the loading iframe is definitely removed from the DOM).
        */

        function getAsset() {


            // create dynamic iframe and style element, adding the style element to the document
            // head of the importing page
            var assetFrame = document.createElement('iframe');
            assetFrame.style.position = "absolute";
            assetFrame.style.left = "-2000px";

            var styleElement = document.createElement('style');
            var headNode = document.querySelector("head");
            headNode.appendChild(styleElement);


            // add the dynamic iframe and load the asset page
            document.body.appendChild(assetFrame);
            assetFrame.src = "assets.html";


            // after it's loaded
            assetFrame.onload = function () {

                var parent = this.parentElement;
                var iframeDoc = this.contentDocument || this.contentWindow.document;

                // get css text of the style in the asset page and append to the parent page style
                var assetStyleElement = iframeDoc.querySelector("style");
                var assetStyleElementText = assetStyleElement.textContent;
                styleElement.appendChild(document.createTextNode(assetStyleElementText));



                // clone the button from the imported assets page
                var cloneBtn = iframeDoc.getElementById("dark-btn").cloneNode(true);


                parent.removeChild(this);
                parent.appendChild(cloneBtn);
            }
        }

        window.onload = getAsset;
    </script>
</head>

<body>
</body>

</html>
